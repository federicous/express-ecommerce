<% if (productos.length) { %>
<h1 class="m-3">Lista de Productos</h1>

<div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
	<% for (const prod of productos) { %>
	<div class="col">
		<div class="card">
			<img src="/images/<%=prod.image %>" alt="Image not found"
				onerror="this.onerror=null;this.src='/images/sin_imagen.jpg';" class="card-img-top"
				alt="<%=prod.name %>">
			<div class="card-body d-flex justify-content-center flex-column align-items-center">
				<p class="card-title"><%=prod.name %></p>
				<p class="card-text" style="font-size: small;"><%=prod.description %></p>
				<p class="card-text"><small class="text-muted">Stock:
						<%=prod.stock %></small></p>
				<p class="card-text"><b>Price: $ <%=prod.price %></b></p>
				<!-- <a href="/api/cart/prduct/<%=prod._id ? prod._id : prod.id %>" class="btn btn-primary">Comprar</a> -->
				<form class="productos d-flex w-100 flex-column" action="/carrito" method="post">

					<input class="form-input d-none" type="text" name="id"
						value="<%=prod._id ? prod._id : prod.id %>">
					<input class="form-input d-none" type="text" name="image"
						value="<%=prod.image %>" readonly="true">
					<input class="form-input d-none" type="text" name="name" value="<%=prod.name %>"
						readonly="true">
					<a class="btn btn-outline-secondary d-block"
						href="/productos/<%=prod._id ? prod._id : prod.id %>">Detalle</a>
					<input class="form-input d-none" type="text" name="price"
						value="<%=prod.price %>" readonly="true">
					<div class="btn-group my-3">
						<!-- <input class="from-control text-center me-3 w-100 d-flex flex-grow-1 justify-content-center"
								type="number" name="qty" value="1"
								min="1" max="<%=prod.stock %>"> -->

						<div class="btn-group" role="group" aria-label="Basic example">
							<button onclick='restar("<%=prod._id ? prod._id : prod.id %>");'
								type="button"
								class="btn btn-primary minus<%=prod._id ? prod._id : prod.id %>"
								id="minus<%=prod._id ? prod._id : prod.id %>">-</button>
							<span><input class="h-100 p-0 m-0 text-center"
									style="min-width: 55px;" value="1" min="1"
									max="<%=prod.stock %>" type="number" name="qty"
									id=""></span>
							<button onclick='sumar("<%=prod._id ? prod._id : prod.id %>","<%=prod.stock %>");'
								type="button"
								id="plus<%=prod._id ? prod._id : prod.id %>"
								class="btn btn-primary me-3 plus<%=prod._id ? prod._id : prod.id %>">+</button>


						</div>
						<button class="form-input btn btn-primary" type="submit"
							value="Add"><svg xmlns="http://www.w3.org/2000/svg" width="18"
								height="18" fill="currentColor"
								class="bi bi-cart-plus-fill" viewBox="0 0 16 16">
								<path
									d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0z" />
							</svg></button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<% } %>
</div>
<nav aria-label="..." class="mt-3">
	<ul class="pagination justify-content-center">
	  <li class="page-item disabled">
	    <span class="page-link">Previous</span>
	  </li>
	  <li class="page-item"><a class="page-link" href="#">1</a></li>
	  <li class="page-item active" aria-current="page">
	    <span class="page-link">2</span>
	  </li>
	  <li class="page-item"><a class="page-link" href="#">3</a></li>
	  <li class="page-item">
	    <a class="page-link" href="?2">Next</a>
	  </li>
	</ul>
      </nav>

<% } else { %>
<div id="verProductos">
	<h4>No hay productos</h4>
</div>
<% } %>